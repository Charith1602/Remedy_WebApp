<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remedy Data Handling Portal</title>
    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body>
    <div class="container">
        <h1 class="title">View Remedy Data </h1>
        <form id="dataForm" method="GET" action="" class="form-container">
            <div class="form-group">
                <input type="hidden" id="fetchedData" name="fetchedData">
                <div>
                    <label for="INCIDENT_ID">Incident ID:</label>
                    <input type="text" id="INCIDENT_ID" name="INCIDENT_ID" placeholder="Incident ID">
                </div>
                <div>
                    <label for="COMPANY">Company:</label>
                    <input type="text" id="COMPANY" name="COMPANY" placeholder="Company">
                </div>
                <div>
                    <label for="ORGANIZATION">Organization:</label>
                    <input type="text" id="ORGANIZATION" name="ORGANIZATION" placeholder="Organization">
                </div>
                <div>
                    <label for="DEPARTMENT">Department:</label>
                    <input type="text" id="DEPARTMENT" name="DEPARTMENT" placeholder="Department">
                </div>
                <div>
                    <label for="CONTACT">Contact:</label>
                    <input type="text" id="CONTACT" name="CONTACT" placeholder="Contact">
                </div>
                <div>
                    <label for="SUMMARY">Summary:</label>
                    <input type="text" id="SUMMARY" name="SUMMARY" placeholder="Summary">
                </div>
                <div>
                    <label for="AUTHORIZATION_GRP">Authorization Group:</label>
                    <input type="text" id="AUTHORIZATION_GRP" name="AUTHORIZATION_GRP" placeholder="Authorization Group">
                </div>
                <div>
                    <label for="SERVICE">Service:</label>
                    <input type="text" id="SERVICE" name="SERVICE" placeholder="Service">
                </div>
                <div>
                    <label for="CI">CI(Caps):</label>
                    <input type="text" id="CI" name="CI" placeholder="CI(Caps)">
                </div>
                <div>
                    <label for="INCIDENT_TYPE">Incident Type:</label>
                    <select id="INCIDENT_TYPE" name="INCIDENT_TYPE">
                        <option value="" disabled selected>Incident Type</option>
                        <option value="user service restoration">user service restoration</option>
                        <option value="user service request">user service request</option>
                        <option value="service improvement">service improvement</option>
                        <option value="infrastructure event">infrastructure event</option>
                    </select>
                </div>
                <div>
                    <label for="REPORTED_SOURCE">Reported Source:</label>
                    <select id="REPORTED_SOURCE" name="REPORTED_SOURCE">
                        <option value="" disabled selected>Reported Source</option>
                        <option value="automation">automation</option>
                        <option value="email">email</option>
                        <option value="phone">phone</option>
                        <option value="self service">self service</option>
                        <option value="event management">event management</option>
                        <option value="chat">chat</option>
                        <option value="instant message">instant message</option>
                        <option value="e bonding">e bonding</option>
                    </select>
                </div>
                <div>
                    <label for="ASSIGNED_GROUP">Assigned Group:</label>
                    <input type="text" id="ASSIGNED_GROUP" name="ASSIGNED_GROUP" placeholder="Assigned Group">
                </div>
                <div>
                    <label for="ASSIGNEE">Assignee:</label>
                    <input type="text" id="ASSIGNEE" name="ASSIGNEE" placeholder="Assignee">
                </div>
                <div>
                    <label for="VENDOR_GROUP">Vendor Group:</label>
                    <input type="text" id="VENDOR_GROUP" name="VENDOR_GROUP" placeholder="Vendor Group">
                </div>
                <div>
                    <label for="VENDOR_TICKET_NUMBER">Vendor Ticket Number:</label>
                    <input type="text" id="VENDOR_TICKET_NUMBER" name="VENDOR_TICKET_NUMBER" placeholder="Vendor Ticket Number">
                </div>
                <div>
                    <label for="STATUS">Status:</label>
                    <select id="STATUS" name="STATUS">
                        <option value="" disabled selected>Status</option>
                        <option value="new">new</option>
                        <option value="assigned">assigned</option>
                        <option value="in progress">in progress</option>
                        <option value="pending">pending</option>
                        <option value="resolved">resolved</option>
                        <option value="closed">closed</option>
                    </select>
                </div>
                <div>
                    <label for="STATUS_REASON">Status Reason:</label>
                    <input type="text" id="STATUS_REASON" name="STATUS_REASON" placeholder="Status Reason">
                </div>
                <div>
                    <label for="PRIORITY">Priority:</label>
                    <select id="PRIORITY" name="PRIORITY" >
                        <option value="" disabled selected>Priority</option>
                        <option value="p1">P1</option>
                        <option value="p2">P2</option>
                        <option value="p3">P3</option>
                        <option value="p4">P4</option>
                    </select>
                </div>
                <div>
                    <label for="CREATION_DATE">Creation Date:</label>
                    <input type="text" id="CREATION_DATE" name="CREATION_DATE" placeholder="Creation Date">
                </div>
                <div>
                    <label for="OPEN_DURATION">Open Duration:</label>
                    <input type="text" id="OPEN_DURATION" name="OPEN_DURATION" placeholder="Open Duration">
                </div>
                <div>
                    <label for="CLOSURE_DATE">Closure Date:</label>
                    <input type="text" id="CLOSURE_DATE" name="CLOSURE_DATE" placeholder="Closure Date">
                </div>
            <button id="searchButton"  onclick="fetchData2()">Search</button>
    </form>
    </div>

    <script>
    // function fetchData() {
    //     // Fetch data based on the filled form fields
    //     const formData = new FormData(document.getElementById('dataForm'));
    //     const queryParams = new URLSearchParams(formData).toString();
    //     window.location.href = `/searchResults?${queryParams}`; // Redirect to /searchResults with query parameters
    // }

    function fetchData2() {
            event.preventDefault();

            // Collect attribute values from input fields
            const incidentId = document.getElementById('INCIDENT_ID').value;
            const company = document.getElementById('COMPANY').value;
            const organization = document.getElementById('ORGANIZATION').value;
            const department = document.getElementById('DEPARTMENT').value;
            const contact = document.getElementById('CONTACT').value;
            const summary = document.getElementById('SUMMARY').value;
            const authorizationGrp = document.getElementById('AUTHORIZATION_GRP').value;
            const service = document.getElementById('SERVICE').value;
            const ci = document.getElementById('CI').value;
            const incidentType = document.getElementById('INCIDENT_TYPE').value;
            const reportedSource = document.getElementById('REPORTED_SOURCE').value;
            const assignedGroup = document.getElementById('ASSIGNED_GROUP').value;
            const assignee = document.getElementById('ASSIGNEE').value;
            const vendorGroup = document.getElementById('VENDOR_GROUP').value;
            const vendorTicketNumber = document.getElementById('VENDOR_TICKET_NUMBER').value;
            const status = document.getElementById('STATUS').value;
            const statusReason = document.getElementById('STATUS_REASON').value;
            const priority = document.getElementById('PRIORITY').value;
            const creationDate = document.getElementById('CREATION_DATE').value;
            const openDuration = document.getElementById('OPEN_DURATION').value;
            const closureDate = document.getElementById('CLOSURE_DATE').value;
            // Collect other attribute values in a similar manner

            // Construct the query string with non-null attributes
            let queryString = '';
            if (incidentId) queryString += `INCIDENT_ID=${incidentId}&`;
            if (company) queryString += `COMPANY=${company}&`;
            if (organization) queryString += `ORGANIZATION=${organization}&`;
            if (department) queryString += `DEPARTMENT=${department}&`;
            if (contact) queryString += `CONTACT=${contact}&`;
            if (summary) queryString += `SUMMARY=${summary}&`;
            if (authorizationGrp) queryString += `AUTHORIZATION_GRP=${authorizationGrp}&`;
            if (service) queryString += `SERVICE=${service}&`;
            if (ci) queryString += `CI=${ci}&`;
            if (incidentType) queryString += `INCIDENT_TYPE=${incidentType}&`;
            if (reportedSource) queryString += `REPORTED_SOURCE=${reportedSource}&`;
            if (assignedGroup) queryString += `ASSIGNED_GROUP=${assignedGroup}&`;
            if (assignee) queryString += `ASSIGNEE=${assignee}&`;
            if (vendorGroup) queryString += `VENDOR_GROUP=${vendorGroup}&`;
            if (vendorTicketNumber) queryString += `VENDOR_TICKET_NUMBER=${vendorTicketNumber}&`;
            if (status) queryString += `STATUS=${status}&`;
            if (statusReason) queryString += `STATUS_REASON=${statusReason}&`;
            if (priority) queryString += `PRIORITY=${priority}&`;
            if (creationDate) queryString += `CREATION_DATE=${creationDate}&`;
            if (openDuration) queryString += `OPEN_DURATION=${openDuration}&`;
            if (closureDate) queryString += `CLOSURE_DATE=${closureDate}&`;
            // Include other attributes in the query string

            // Remove the trailing '&' if present
            if (queryString.endsWith('&')) {
                queryString = queryString.slice(0, -1);
            }

            // Fetch data using the constructed query string
            fetch(`/fetchData2?${queryString}`)
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error('Record not found!');
                    }
                })
                // .then(data => {
                //     populateFormFields(data);
                // })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    // Show pop-up message for record not found
                    alert('Record not found!!!');
                });
        }



//     function fetchData2() {
//     event.preventDefault();

//     // Collect attribute values from input fields
//     const formData = new FormData(document.getElementById('dataForm'));
//     const data = Object.fromEntries(formData.entries());

//     // Fetch data using POST request
//     fetch('/fetchData2', {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json'
//         },
//         body: JSON.stringify(data)
//     })
//     .then(response => {
//         if (response.ok) {
//             return response.json();
//         } else {
//             throw new Error('Record not found!');
//         }
//     })
//     .then(data => {
//         // Handle fetched data (if needed)
//         console.log(data);
//         // Redirect or display data as required
//     })
//     .catch(error => {
//         console.error('Error fetching data:', error);
//         // Show pop-up message for record not found
//         alert('Record not found!!!');
//     });
// }
        </script>
        
    
    
</body>
</html>
